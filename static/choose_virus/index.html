<!doctype html>

<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Epidemic Go</title>
  <script src="//cdn.socket.io/socket.io-1.2.0.js"></script>
  <link href="//fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

  <!-- Custom CSS -->
  <link href="../css/custom.css" rel="stylesheet">
  <!--Import Google Icon Font-->
  <link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!--Let browser know website is optimized for mobile-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css">

  <!--Import jQuery before materialize.js-->
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>
  <link href="../css/style.css" rel="stylesheet" />
  <link rel="icon" href="../images/0.png" />
  <script src="../js/style.js"></script>

  <!--Carousal Movement-->
  <script>
    $(document).ready(function() {
      $('.carousel').carousel({
        dist: 0,
        shift: 0,
        padding: 0,
      });
    });
  </script>

  <!--Update Chosen Virus-->
  <script>
    var img = 12;
    var d = 2;
    function changeImage(imagelink, distance, infection) {
      img = imagelink;
      d = parseInt(distance) / 5;
      document.getElementById('yourvirus').src = "./img/virus_" + imagelink + ".png";
      document.getElementById('yourdistance').innerHTML = "Distanced: " + distance + " ft";
      document.getElementById('yourinfection').innerHTML = "Time: " + infection + " day";
      
      document.getElementById('chosenvirus').src = "./img/virus_" + imagelink + ".png";
      document.getElementById('chosendistance').innerHTML = "Distanced: " + distance + " ft";
      document.getElementById('choseninfection').innerHTML = "Time: " + infection + " day";
    }

    $(document).ready(function() {
      $('.modal').modal();
    });
  </script>

  <!--Body of page-->
  <style>
    .blue.lighten-1 { background-color: #a04799 !important; }

    body { background-color: #d1c4e9; }

    .carousel .carousel-item {
      height: 350px !important;
      width: 110px !important;
    }

    .modal-fixed-center {
      transform: translateX(-50%) translateY(-50%);
      -webkit-transform: translateX(-50%) translateY(-50%);
      -o-transform: translateX(-50%) translateY(-50%);
      -moz-transform: translateX(-50%) translateY(-50%);
      top: 50%;
      left: 50%;
    }
  </style>
</head>

<body>

  <!--Navbar & Sidebar-->
  <nav>
    <div class="nav-wrapper blue lighten-1">
      <a href="#" class="brand-logo center">Epidemic Go</a>
      <a href="profile.html"><i class="material-icons right">perm_identity</i></a>

      <ul id="slide-out" class="side-nav">
        <li>
          <div class="userView">
            <div class="background blue"></div>
            <a href="#!user"><img class="circle" src="../images/profile.png"></a>
            <a href="#!name"><span class="profile-name white-text name">Alok Mysore</span></a>
            <div class="levelup">
              <div class="determinate" style="width: 70%"></div>
            </div>
            <a href="#!email"><span class="white-text">level 6</span></a>
          </div>
        </li>

        <li><a href="../landingPage.html"><i class="material-icons">dashboard</i>Home</a></li>
        <li><a href="../index.html"><i class="material-icons">play_arrow</i>Play Now</a></li>
        <li><a href="#!"><i class="material-icons">person_pin</i>Social</a></li>
        <li>
          <div class="divider"></div>
        </li>
        <li><a class="waves-effect" href="../howtoplay.html">How to play</a></li>
        <li><a class="waves-effect" href="#!">Setting</a></li>
      </ul>
      <a href="#" data-activates="slide-out" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>

  <!-- Viruses -->
  <div class="container">
    <div class="intro-text">
      <h5><center>Choose Your Virus</center></h5>
      <div class="row">
        <div class="col s6">
          <p>
            <center>Your Virus</center>
          </p>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col s6">
        <center><img class="responsive-img" id="yourvirus" src="./img/virus_12.png"></center>
      </div>
      <div class="col s6">
        <p id="yourdistance"> Distanced: 10 ft</p>
        <p id="yourinfection"> Time: 1 day</p>
        <a class="responsive-btn" href="#play">
          <center>
            <button class="waves-effect waves-light btn purple lighten-1 white-text" type='button' id="choose">Choose Virus</button>
          </center>
        </a>
      </div>
    </div>
    <form id="myForm">
      <div class="carousel">
        <a class="carousel-item" href="#one!">
          <div class="row">Cougher</div>
          <div class="row">
            <img src="./img/virus_1.png">
          </div>
          <div class="row">
            <button class="waves-effect waves-light btn purple lighten-1 white-text" type='button' onClick="changeImage(12, 5, 3)">View</button>
          </div>
        </a>
        <a class="carousel-item" href="#two!">
          <div class="row">Sneezer</div>
          <div class="row">
            <img src="./img/virus_2.png">
          </div>
          <div class="row">
            <button class="waves-effect waves-light btn purple lighten-1 white-text" type='button' onClick="changeImage(22, 20, 2)">View</button>
          </div>
        </a>
        <a class="carousel-item" href="#three!">
          <div class="row">Puker</div>
          <div class="row">
            <img src="./img/virus_3.png">
          </div>
          <div class="row">
            <button class="waves-effect waves-light btn purple lighten-1 white-text" type='button' onClick="changeImage(32, 40, 4)">View</button>
          </div>
        </a>
        <a class="carousel-item" href="#four!">
          <div class="row">Coffee</div>
          <div class="row">
            <img src="./img/virus_4.png">
          </div>
          <div class="row">
            <button class="waves-effect waves-light btn purple lighten-1 white-text" type='button' onClick="changeImage(42, 1, 10)">View</button>
          </div>
        </a>
        <a class="carousel-item" href="#five!">
          <div class="row">Peeker</div>
          <div class="row">
            <img src="./img/virus_5.png">
          </div>
          <div class="row">
            <button class="waves-effect waves-light btn purple lighten-1 white-text" type='button' onClick="changeImage(52, 30, 1.5)">View</button>
          </div>
        </a>
        <a class="carousel-item" href="#six!">
          <div class="row">Craze</div>
          <div class="row">
            <img src="./img/virus_6.png">
          </div>
          <div class="row">
            <button class="waves-effect waves-light btn purple lighten-1 white-text" type='button' onClick="changeImage(62, 35, 2.5)">View</button>
          </div>
        </a>
        <a class="carousel-item" href="#seven!">
          <div class="row">Wonky</div>
          <div class="row">
            <img src="./img/virus_7.png">
          </div>
          <div class="row">
            <button class="waves-effect waves-light btn purple lighten-1 white-text" type='button' onClick="changeImage(72, 25, 4)">View</button>
          </div>
        </a>
      </div>
    </form>
  </div>

  <div id="loginmodel" class="modal modal-fixed-center" style="z-index:100">
    <div class="model-content">
      <div class="row">
        <form class="col s12" style="margin-top: 20px;">
          <div class="row">
            <div class="input-field col s12">
              <input id="name" type="email">
              <label for="email" data-error="wrong" data-success="right">Name</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <input id="email" type="email">
              <label for="email" data-error="wrong" data-success="right">Email</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <input id="password" type="password">
              <label for="password">Password</label>
            </div>
          </div>
          <div class="row">
            <button class="btn waves-effect waves-light" name="Sign In" id="signup">Sign Up
  					    <i class="material-icons right">send</i>
  					  </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal to Play -->
  <div id="play" class="modal deep-purple lighten-4">
    <div class="modal-content deep-purple lighten-4">
      <h4>Your Chosen Virus is:</h4>
      <div class="col s6">
        <center><img class="responsive-img" id="chosenvirus" src="./img/virus_12.png"></center>
      </div>
      <div class="col s6">
        <p id="chosendistance"> Distanced: 10 ft</p>
        <p id="choseninfection"> Time: 1 day</p>
      </div>
    </div>
    <div class="modal-footer deep-purple lighten-4">
      <a class="left waves-effect waves-light btn purple lighten-1 white-text" type='button' href="./index.html" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
      <div type='button' class="right waves-effect waves-light btn purple lighten-1 white-text" id="continueToGame">Continue</div>
    </div>
  </div>
  <script>
    const socket = io();
    var player;
    if (location.href.indexOf("signup") > -1) {
      $("#loginmodel").show();
    }
    
    $("#signup").on("click", function(e) {
      if ($("#name").val() === "") alert("Missing name");
      else if ($("#email").val() === "") alert("Missing email");
      else if ($("#password").val() === "") alert("Missing password");
      else {
        $("#loginmodel").hide();
      }
      e.preventDefault();
    });
    
    $("#continueToGame").on('click', function() {
      localStorage.email = $("#email").val();
      localStorage.password = $("#password").val();
      player = {
        email: $("#email").val(),
        password: $("#password").val(),
        name: $("#name").val(),
        virus: {
          color: '#' + Math.floor(Math.random() * 16777215).toString(16),
          image: img,
          theshold: d
        }
      };
      socket.emit("signup", JSON.stringify(player));
      socket.on("success", function(evt) {
        player = JSON.parse(evt);
        location.href = "..";
      });
      
      socket.on("displayError", function(evt) {
        alert(evt);
      });
    });
  </script>
</body>

</html>
